protocol static uplink_whq {
  route 0.0.0.0/0 via "ethtr";
}

protocol bfd {
}

filter net_dev {
  if net ~ [ 172.20.0.0/16+, 172.30.0.0/16+ ] then accept; else reject;
}

filter default_route {
  # We always announce us with a default route to test ECMP between DEV/WHQ
  if net = 0.0.0.0/0 then accept; else reject;
}

protocol kernel {
  export filter net_dev;
  # Our routes should be of a lower priority than static/kernel routes.
  metric 500;
}

protocol device {
  scan time 60;
}

protocol bgp peer_dev_eddie {
  passive;

  local as 64513;

  import filter net_dev;
  export filter default_route;

  bfd;
  connect retry time 15;
  error wait time 5,10;

  neighbor 172.20.6.5 as 64512;
}

protocol bgp peer_dev_kenny00 {
  passive;

  local as 64513;

  import filter net_dev;
  export filter default_route;

  bfd;
  connect retry time 15;
  error wait time 5,10;

  neighbor 172.20.6.9 as 64512;
}
